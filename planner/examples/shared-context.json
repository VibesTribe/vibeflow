{
    "contextSnapshotPath":  "docs/reports/repo-snapshot.json",
    "slice":  {
                  "id":  "S0",
                  "name":  "Shared Context Backbone",
                  "goal":  "Ensure every agent reads the same repo snapshot, OpenSpec digest, and synced state.",
                  "echo_check":  "Deliver S0 repo snapshot + digest + pages sync so dashboard reflects latest repo state.",
                  "tasks":  [
                                {
                                    "taskId":  "S0.1",
                                    "title":  "Wire Repo Snapshot Writer",
                                    "purpose":  "Emit docs/reports/repo-snapshot.json with git metadata for downstream agents.",
                                    "taskType":  "code",
                                    "domainTag":  "infra",
                                    "deliverables":  [
                                                         "scripts/context/write-repo-snapshot.mjs"
                                                     ],
                                    "output":  {
                                                   "language":  "JavaScript",
                                                   "version":  "ES2020",
                                                   "format":  "text",
                                                   "files":  [
                                                                 "scripts/context/write-repo-snapshot.mjs"
                                                             ]
                                               },
                                    "instructions":  [
                                                         "Read the repo tree (exclude .git, node_modules) and emit docs/reports/repo-snapshot.json.",
                                                         "Capture per-file sha256, byte size, and modified timestamp; include git commit + branch.",
                                                         "Keep memory footprint low by streaming directory traversal.",
                                                         "Return the updated script file inside \u003cFILE\u003e fences."
                                                     ],
                                    "acceptanceCriteria":  [
                                                               "npm run context:snapshot succeeds",
                                                               "docs/reports/repo-snapshot.json includes git metadata and file list",
                                                               "Unit tests cover happy path + ignored directories"
                                                           ],
                                    "reviewPolicy":  "auto",
                                    "validation":  [
                                                       {
                                                           "name":  "unit-tests",
                                                           "tool":  "npm test"
                                                       },
                                                       {
                                                           "name":  "manual-run",
                                                           "tool":  "npm run context:snapshot"
                                                       }
                                                   ],
                                    "execution":  {
                                                      "platform":  "vscode-codex",
                                                      "model":  "openai:gpt-4.1-mini",
                                                      "budget_usd":  0.25,
                                                      "max_tokens":  6000,
                                                      "latency_slo_ms":  60000
                                                  },
                                    "confidence":  0.97,
                                    "dependsOn":  [

                                                  ]
                                },
                                {
                                    "taskId":  "S0.2",
                                    "title":  "Generate OpenSpec Digest",
                                    "purpose":  "Scan openspec/changes and produce docs/updates/OPEN_SPEC_DIGEST.md + JSON index.",
                                    "taskType":  "code",
                                    "domainTag":  "infra",
                                    "deliverables":  [
                                                         "scripts/context/generate-openspec-digest.mjs"
                                                     ],
                                    "output":  {
                                                   "language":  "JavaScript",
                                                   "version":  "ES2020",
                                                   "format":  "text",
                                                   "files":  [
                                                                 "scripts/context/generate-openspec-digest.mjs"
                                                             ]
                                               },
                                    "instructions":  [
                                                         "Enumerate openspec/**/*.md recursively and collect title + summary + mtime.",
                                                         "Write docs/updates/OPEN_SPEC_DIGEST.md (table) and data/state/openspec.index.json.",
                                                         "Skip gracefully if openspec is empty; maintain deterministic ordering.",
                                                         "Return the updated script file inside \u003cFILE\u003e fences."
                                                     ],
                                    "acceptanceCriteria":  [
                                                               "npm run context:openspec succeeds",
                                                               "Digest lists latest entries sorted by updated_at",
                                                               "Unit tests verify empty folder handling"
                                                           ],
                                    "reviewPolicy":  "auto",
                                    "validation":  [
                                                       {
                                                           "name":  "unit-tests",
                                                           "tool":  "npm test"
                                                       },
                                                       {
                                                           "name":  "manual-run",
                                                           "tool":  "npm run context:openspec"
                                                       }
                                                   ],
                                    "execution":  {
                                                      "platform":  "vscode-codex",
                                                      "model":  "openai:gpt-4.1-mini",
                                                      "budget_usd":  0.2,
                                                      "max_tokens":  6000,
                                                      "latency_slo_ms":  60000
                                                  },
                                    "confidence":  0.97,
                                    "dependsOn":  [
                                                      "task:S0.1",
                                                      "artifact:data/state/openspec.index.json"
                                                  ]
                                },
                                {
                                    "taskId":  "S0.3",
                                    "title":  "Sync Dashboard State",
                                    "purpose":  "Mirror data/state/**/* into docs/state/**/* for GitHub Pages telemetry dashboards.",
                                    "taskType":  "code",
                                    "domainTag":  "infra",
                                    "deliverables":  [
                                                         "scripts/pages/sync-dashboard-state.mjs"
                                                     ],
                                    "output":  {
                                                   "language":  "JavaScript",
                                                   "version":  "ES2020",
                                                   "format":  "text",
                                                   "files":  [
                                                                 "scripts/pages/sync-dashboard-state.mjs"
                                                             ]
                                               },
                                    "instructions":  [
                                                         "Recursively copy data/state and data/metrics into docs/state (remove old files first).",
                                                         "Ensure the script is idempotent and preserves directory structure.",
                                                         "When executed on a hosted studio, include the chat URL in your completion for audit.",
                                                         "Return the updated script file inside \u003cFILE\u003e fences."
                                                     ],
                                    "acceptanceCriteria":  [
                                                               "npm run pages:sync completes",
                                                               "docs/state mirrors data/state structure",
                                                               "No stale files remain after sync"
                                                           ],
                                    "reviewPolicy":  "auto",
                                    "validation":  [
                                                       {
                                                           "name":  "unit-tests",
                                                           "tool":  "npm test"
                                                       },
                                                       {
                                                           "name":  "manual-run",
                                                           "tool":  "npm run pages:sync"
                                                       }
                                                   ],
                                    "execution":  {
                                                      "platform":  "opencode-studio",
                                                      "model":  "opencode:glm-4-6-free",
                                                      "budget_usd":  0.15,
                                                      "max_tokens":  4000,
                                                      "latency_slo_ms":  60000,
                                                      "require_chat_url":  true
                                                  },
                                    "modelBehavior":  {
                                                          "topic_affinity":  "node file sync utilities",
                                                          "policy_flags":  [
                                                                               "PII_FREE",
                                                                               "DETERMINISTIC_REQUIRED"
                                                                           ],
                                                          "max_token_context":  6000
                                                      },
                                    "confidence":  0.96,
                                    "dependsOn":  [
                                                      "task:S0.1",
                                                      "task:S0.2",
                                                      "artifact:data/state/openspec.index.json"
                                                  ]
                                }
                            ]
              },
    "ideaId":  "example-app"
}
