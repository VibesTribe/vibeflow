{
  "$schema": "https://vibeflow.dev/schemas/routing.policy.json",
  "updated_at": "2025-10-11T22:30:00Z",
  "defaults": {
    "max_attempts": 3,
    "fallback_model": "openai:gpt-4.1-mini"
  },
  "rules": [
    {
      "match": {
        "task_type": "visual"
      },
      "route": {
        "platform": "browser-use:devtools-mcp",
        "requires_human_approval": true,
        "notes": "Visual gate uses Browser-Use + DevTools MCP"
      }
    },
    {
      "match": {
        "tags": ["cli_agent"]
      },
      "route": {
        "platform": "codex:cli",
        "notes": "Default CLI agent path (Codex)"
      }
    },
    {
      "match": {
        "domain_tag": "infra",
        "tags": ["free"]
      },
      "route": {
        "platform": "opencode:glm-4-6-free",
        "require_chat_url": true,
        "notes": "Prefer free OpenCode studio when available"
      }
    },
    {
      "match": {
        "tags": ["web_studio"]
      },
      "route": {
        "platform": "openrouter:deepseek-r1",
        "require_chat_url": true,
        "notes": "Fallback free OpenRouter studio"
      }
    },
    {
      "match": {
        "task_type": "code"
      },
      "route": {
        "platform": "openai:gpt-4.1-mini"
      }
    }
  ]
}
